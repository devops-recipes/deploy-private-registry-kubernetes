resources:

  - name: dprk_app_img
    type: image
    # replace drship_dockerhub with your docker hub integration name
    integration: drship_dockerhub
    pointer:
      # replace devopsrecipes/dprk_node_sample_app with your docker registry
      # repository
      sourceName: devopsrecipes/dprk_node_sample_app
    seed:
      versionName: "latest"

  - name: dprk_gitRepo
    type: gitRepo
    # replace dr_github with your GitHub integration name
    integration: dr_github
    pointer:
      # replace with source code location (e.g. GitHub) where you cloned this
      # sample project.
      sourceName: devops-recipes/deploy-kubernetes-secrets
      branch: master

  - name: dprk_kube_cliConfig
    type: cliConfig
    #replace with your Kubernetes integration name
    integration: drship_kube
    pointer:
      # replace us-central1-a with your availability zone
      region: us-central1-a

  - name: dprk_secret
    type: integration
    integration: drship_docker_registry_secret

  - name: dprk_secret_opts
    type: dockerOptions
    version:
      pod:
        imagePullSecrets:
          - name: ${docker_secret_name}

  - name: dprk_lb
    type: loadBalancer
    #replace with your Kubernetes integration name
    integration: drship_kube
    pointer:
      sourceName: "dprk-loadbalancer"
      method: LoadBalancer
      # replace devops-test-cluster with your google container engine cluster name
      clusterName: "devops-test-cluster"
    version:
      ports:
        - name: testport
          protocol: TCP
          port: 80
      selector:
        shippable.manifestName: "dprk-app-def"
        shippable.jobName: "dprk-app-deploy"

  - name: dprk_kube_cluster
    type: cluster
    #replace with your Kubernetes integration name
    integration: drship_kube
    pointer:
      # replace devops-test-cluster with your google container engine cluster name
      sourceName: "devops-test-cluster"
      # replace us-central1-a with your availability zone
      region: us-central1-a
